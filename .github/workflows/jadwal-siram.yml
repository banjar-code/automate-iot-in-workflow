name: Relay Control

on:
  schedule:
    - cron: '* * * * *'  # Menjalankan setiap satu menit
  workflow_dispatch:

jobs:
  relay:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout kode
      uses: actions/checkout@v2

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '16'  # Menggunakan Node.js versi terbaru

    - name: Aktifkan Relay
      run: |
        
        # Mengaktifkan relay
        curl -X GET "https://sgp1.blynk.cloud/external/api/update?token=vQ_8kZRKKa4wihusUipdQzdnpYUsK5fY&v1=1"
        
    - name: Tunggu 20 Detik
      run: |
        # Tambahkan penundaan selama 20 detik
        sleep 10
        
    - name: Matikan Relay
      run: |
        # Mematikan relay
        curl -X GET "https://sgp1.blynk.cloud/external/api/update?token=vQ_8kZRKKa4wihusUipdQzdnpYUsK5fY&v1=0"
